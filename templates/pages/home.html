{% extends "base.html" %}
{% block title %}
  this is amazing
{% endblock title %}
this is amazing
{% block content %}
  Welcome to tweetme2

  <div id="tweets">
      Loading ...
  </div>

  <script>
      const  tweetsElement = document.getElementById('tweets')
    //   tweetsElement.innerHTML = 'Loading ...'

    //   var el1 = '<h1>Hi there 1</h1>'
    //   var el2 = '<h1>Hi there 2</h1>'
    //   var el3 = '<h1>Hi there 3</h1>'
    
    //   tweetsElement.innerHTML= el1+el2+el3
      const xhr = new XMLHttpRequest()
      const method = "GET"
      const url = '/tweets'
      const responseType = "json"
      function formatTweetElement(tweet){        
        var formatedTweet = "<div class='mb-4'><h1>"+tweet.id + "</h1>" + "<p>" + tweet.content + '</p></div>'
        return formatedTweet
      }

      xhr.responseType = responseType
      xhr.open(method, url)
      xhr.onload = function(){
          const serverResponse = xhr.response 
          const listedItems = serverResponse.response
          var finalTweetStr = ''
          var i ;
          for(i=0; i<listedItems.length; i++){
              var tweetObj = listedItems[i]
             var currentItem = formatTweetElement(tweetObj)
                finalTweetStr += currentItem
          }
          tweetsElement.innerHTML = finalTweetStr
        //   console.log(listedItems)

      }
      xhr.send()
  </script>

{% endblock content %}
